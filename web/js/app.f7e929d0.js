(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("8a23"),r=a.n(n);r.a},"38c8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"","max-height":"1000",flat:""}},[a("v-app-bar-nav-icon")],1),a("v-overlay",{attrs:{value:e.appLoading}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1),a("v-content",[a("v-container",[a("v-row",{staticClass:"mb-12 align-center"},[a("v-col",{attrs:{cols:"5"}},[a("v-card",{staticClass:"round",attrs:{elevation:"22"}},[e.options.currentWallpaper.baseUrl?a("v-skeleton-loader",{attrs:{type:"image","max-height":"350"}}):e._e(),e.options.currentWallpaper.baseUrl?e._e():a("v-img",{staticClass:"round",attrs:{src:e.options.currentWallpaper.baseUrl,"max-height":"350"}})],1)],1),a("v-col",{staticClass:"pb-10",attrs:{cols:"7"}},[a("div",{staticClass:"pa-5"},[e.options.currentWallpaper?e._e():a("v-skeleton-loader",{attrs:{type:"sentences, heading"}}),e.options.currentWallpaper?a("div",[a("h3",{staticClass:"headline font-weight-bold"},[e._v("Current wallpaper")]),a("v-breadcrumbs",{staticClass:"px-1 pt-1 pb-2",attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[a("v-icon",[e._v("mdi-arrow-right")])]},proxy:!0}],null,!1,2838176802)}),a("v-btn",{staticClass:"ma-1",attrs:{outlined:""}},[e._v("Previous")]),a("v-btn",{staticClass:"ma-1",attrs:{outlined:""}},[e._v("Next")]),a("v-btn",{staticClass:"ma-1",attrs:{outlined:""}},[e._v("Random")])],1):e._e()],1)])],1),a("v-skeleton-loader",{attrs:{type:"list-item@10",loading:!(e.favorites.length&&e.albums.length)}},[a("h3",{staticClass:"subtitle-1 font-weight-bold ma-3"},[e._v("Selected albums")]),a("v-expansion-panels",{staticClass:"albums",attrs:{accordion:"",multiple:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"py-0",scopedSlots:e._u([{key:"default",fn:function(t){return[a("v-layout",[a("v-checkbox",{attrs:{label:"Favorites",value:"FAVORITES"},on:{click:e.setSelectedAlbums},nativeOn:{click:function(t){return e.preventExpansion(t)}},model:{value:e.options.selectedAlbums,callback:function(t){e.$set(e.options,"selectedAlbums",t)},expression:"options.selectedAlbums"}})],1)]}}])}),a("v-expansion-panel-content",[a("media-items",{attrs:{"media-items":e.favorites,source:"Favorites"}})],1)],1),e._l(e.albums,(function(t){return a("v-expansion-panel",{key:t.id,on:{change:function(a){return e.loadAlbum(t.id)}}},[a("v-expansion-panel-header",{staticClass:"py-0",scopedSlots:e._u([{key:"default",fn:function(n){return[a("v-layout",[a("v-checkbox",{attrs:{label:t.title,value:t.id},on:{change:e.setSelectedAlbums},nativeOn:{click:function(t){return e.preventExpansion(t)}},model:{value:e.options.selectedAlbums,callback:function(t){e.$set(e.options,"selectedAlbums",t)},expression:"options.selectedAlbums"}})],1)]}}],null,!0)}),a("v-expansion-panel-content",[a("v-skeleton-loader",{attrs:{type:"image",loading:!t.mediaItems}},[a("media-items",{attrs:{"media-items":t.mediaItems,source:t.title}})],1)],1)],1)}))],2)],1)],1)],1)],1)},s=[],o=a("5530"),i=(a("96cf"),a("1da1")),l=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",e._l(e.mediaItems,(function(t){return a("v-col",{key:t.id,staticClass:"pa-1",attrs:{cols:"3",sm:"2",md:"1"}},[a("v-card",{on:{click:function(a){return e.setWallpaper(t,e.source)}}},[a("v-img",{attrs:{src:e._f("medUrl")(t),"lazy-src":e._f("smallUrl")(t),"aspect-ratio":"1"}},[a("v-overlay",{attrs:{absolute:"",value:1==t.loading}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1),e.options.currentWallpaper?a("v-overlay",{attrs:{absolute:"",color:"blue",value:t.id==e.options.currentWallpaper.id}},[a("v-icon",[e._v("mdi-check")])],1):e._e()],1)],1)],1)})),1)},u=[],p={name:"mediaItems",props:["mediaItems","source"],methods:{setWallpaper:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n["a"].set(t,"loading",!0),t.source=a,e.next=4,this.$store.dispatch("setWallpaper",{mediaItem:t});case 4:n["a"].set(t,"loading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},computed:Object(o["a"])({},Object(l["b"])(["options"]))},d=p,m=a("2877"),v=a("6544"),f=a.n(v),b=a("b0af"),h=a("62ad"),g=a("132d"),w=a("adda"),_=a("a797"),y=a("490a"),x=a("0fd9"),A=Object(m["a"])(d,c,u,!1,null,null,null),C=A.exports;f()(A,{VCard:b["a"],VCol:h["a"],VIcon:g["a"],VImg:w["a"],VOverlay:_["a"],VProgressCircular:y["a"],VRow:x["a"]});var V={name:"App",components:{MediaItems:C},beforeCreate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("getFavorites"),e.$store.dispatch("getAlbums"),t.next=4,e.$store.dispatch("getUserOptions");case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{appLoading:!1}},computed:Object(o["a"])({breadcrumbs:function(){return[{text:this.options.currentWallpaper.source},{text:this.options.currentWallpaper.filename}]}},Object(l["b"])(["options","favorites","albums"])),methods:{preventExpansion:function(e){e.cancelBubble=!0},loadAlbum:function(e){this.$store.dispatch("getAlbum",{albumId:e})},setSelectedAlbums:function(){var e=this;this.$data.appLoading=!0,window.eel.set_selected_albums(this.$store.state.options.selectedAlbums)((function(){e.$data.appLoading=!1}))}}},I=V,O=(a("034f"),a("7496")),k=a("40dc"),W=a("5bc1"),P=a("2bc5"),j=a("8336"),S=a("ac7c"),U=a("a523"),$=a("a75b"),E=a("cd55"),R=a("49e2"),F=a("c865"),L=a("0393"),B=a("a722"),M=a("3129"),T=Object(m["a"])(I,r,s,!1,null,null,null),J=T.exports;f()(T,{VApp:O["a"],VAppBar:k["a"],VAppBarNavIcon:W["a"],VBreadcrumbs:P["a"],VBtn:j["a"],VCard:b["a"],VCheckbox:S["a"],VCol:h["a"],VContainer:U["a"],VContent:$["a"],VExpansionPanel:E["a"],VExpansionPanelContent:R["a"],VExpansionPanelHeader:F["a"],VExpansionPanels:L["a"],VIcon:g["a"],VImg:w["a"],VLayout:B["a"],VOverlay:_["a"],VProgressCircular:y["a"],VRow:x["a"],VSkeletonLoader:M["a"]});var N=a("f309"),z=a("fcf4");n["a"].use(N["a"]);var H=new N["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:z["a"].blue.darken1,secondary:z["a"].blue.darken4,accent:z["a"].blue.accent2}}}});a("d5e8"),a("5363"),a("d81d"),a("d3b7");n["a"].use(l["a"]);var q=new l["a"].Store({state:{favorites:[],albums:[],options:{currentWallpaper:{},selectedAlbums:[]}},getters:{},mutations:{setCurrentWallpaper:function(e,t){var a=t.mediaItem;e.options.currentWallpaper=a},setFavorites:function(e,t){var a=t.mediaItems;e.favorites=a},setAlbums:function(e,t){var a=t.albums;e.albums=a},setAlbum:function(e,t){var a=t.albumId,r=t.mediaItems;e.albums=e.albums.map((function(e){return e.id==a&&n["a"].set(e,"mediaItems",r),e}))},setUserOptions:function(e,t){var a=t.options;a.selectedAlbums=a.selectedAlbums.map((function(e){return e.id})),e.options=a}},actions:{setWallpaper:function(e,t){var a=e.commit,n=t.mediaItem;return new Promise((function(e){window.eel.set_wallpaper(n)((function(){a("setCurrentWallpaper",{mediaItem:n}),e()}))}))},getFavorites:function(e){var t=e.commit;window.eel.get_favorites()((function(e){var a=e.mediaItems;t("setFavorites",{mediaItems:a})}))},getAlbums:function(e){var t=e.commit;window.eel.get_albums()((function(e){var a=e.albums;t("setAlbums",{albums:a})}))},getAlbum:function(e,t){var a=e.commit,n=t.albumId;window.eel.get_album_media_items(n)((function(e){var t=e.mediaItems;a("setAlbum",{albumId:n,mediaItems:t})}))},getUserOptions:function(e){var t=e.commit;return new Promise((function(e){window.eel.get_user_options()((function(a){delete a.currentWallpaper.baseUrl,t("setUserOptions",{options:a});var n=a.currentWallpaper.source;window.eel.get_media_item(a.currentWallpaper.id)((function(a){a.source=n,t("setCurrentWallpaper",{mediaItem:a}),e()}))}))}))},setSelectedAlbums:function(e,t){var a=t.selectedAlbums;return console.log(a),new Promise((function(e){window.eel.set_selected_albums(a)((function(){e()}))}))}}});a("38c8"),a("4de4");n["a"].filter("smallUrl",(function(e){return e.baseUrl+"=w25-h25"})),n["a"].filter("medUrl",(function(e){return e.baseUrl+"=w150-h150"})),n["a"].config.productionTip=!1,new n["a"]({vuetify:H,store:q,render:function(e){return e(J)}}).$mount("#app")},"8a23":function(e,t,a){}});
//# sourceMappingURL=app.f7e929d0.js.map